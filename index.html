<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NextWayThere</title>
  <link rel="stylesheet" href="./styles/styles.css">
  <script src="./script/papaparse.min.js"></script>
  <script src="./script/jszip.min.js"></script>
  <script type="module" src="./script/preprocessors.mjs"></script>
  <script src="./script/notices.js"></script>
  <script defer src="./script/regionSelection.js"></script>
  <script defer src="./script/loader.js"></script>
  <script type="module" src="./script/customRegion.mjs"></script>
  <script type="module" src="./script/gtfs.mjs"></script>
  <script type="module" src="./script/dynamicFeatures.mjs"></script>
</head>

<body>
  <h1>NextWayThere</h1>
  <div id="notices">
    <noscript>
      <div class="major-notice">
        <p>This page uses JavaScript, but you have it disabled. Please enable JavaScript in your browser's settings.</p>
      </div>
    </noscript>
    <div class="minor-notice">
      <p>This website is not ready for actual use yet. You can check out the development
        <a href="https://github.com/zacsay/next-way-there">here</a>.
      </p>
    </div>
    <div hidden class="success-notice" id="updates-downloaded">
      <p>Updates successfully downloaded.
        <button onclick="dismissNotice('updates-downloaded')">Dismiss</button>
      </p>
    </div>
    <div hidden class="minor-notice" id="downloading-updates">
      <p>Downloading updated region list. Please wait.</p>
    </div>
    <div hidden class="minor-notice" id="missing-some-data">
      <p>New regions are available. You can update the region list.
        <button onclick="loadRegions()">Update region list</button>
      </p>
    </div>
    <div hidden class="medium-notice" id="missing-all-data">
      <p>You do not appear to have used this site before, or the site's data in this browser
        has been deleted. You need to download the region list before you can use pre-defined regions. You
        can still load local GTFS feeds without doing this.
        <button onclick="loadRegions()">Download region list</button>
      </p>
    </div>
  </div>
  <div id="region-selector">
    <label for="region-dropdown">Please select your region:</label>
    <select id="region-dropdown" onchange="updateRegion()">
      <option value="null" selected disabled>Please select a region.</option>
      <option value="custom" id="custom-region-option">Custom...</option>
    </select>
  </div>
  <div id="custom-region-options" hidden>
    <h2>Custom region options</h2>
    <p><a href="./help/custom-regions.html">Learn how to use custom regions</a></p>
    <fieldset id="custom-region-creation-mode">
      <legend>Custom region data upload mode</legend>
      <input id="use-existing-custom-region-radio" type="radio" name="custom-region-upload" onchange="updateCustomRegionUploadMode()" checked autocomplete="off" />
      <label for="use-existing-custom-region-radio">Use an existing custom region</label>
      <fieldset id="use-existing-custom-region-options" class="fs-no-border">
        <input id="existing-custom-region-read-only" type="radio" name="existing-custom-region-mode" onchange="showHideCustomRegionUpload()" checked autocomplete="off" />
        <label for="existing-custom-region-read-only">Open for reading only</label>
        <input id="existing-custom-region-overwrite" type="radio" name="existing-custom-region-mode" onchange="showHideCustomRegionUpload()" autocomplete="off" />
        <label for="existing-custom-region-overwrite">Overwrite with new data</label><br>
        <label for="existing-custom-region-select">Select an existing custom region:</label>
        <select id="existing-custom-region-select"><!-- This should be filled by a script --></select>
      </fieldset>
      <input id="create-new-custom-region-radio" type="radio" name="custom-region-upload" onchange="updateCustomRegionUploadMode()" autocomplete="off" />
      <label for="create-new-custom-region-radio">Create a new custom region</label>
      <fieldset id="create-new-custom-region-options" class="fs-no-border">
        <label for="custom-region-name">Enter a name for your custom region:</label>
        <input id="custom-region-name" type="text" placeholder="Custom region name" autocomplete="off" />
      </fieldset>
    </fieldset>
    <div id="custom-region-select-button-container">
      <button id="custom-region-select-extracted-button">Select directory with extracted GTFS feed</button>
      <p>or</p>
      <button id="custom-region-select-zipped-button">Select GTFS feed contained in a zip file</button>
    </div>
    <p id="custom-region-selection"></p>
  </div>
</body>

</html>
